# Проект Yatube
Социальная сеть
### Описание
Учебный проект для изучения возможностей фреймворка Django Rest Framework.
(Создание API для Django проектов).
### Доступные эндпоинты проекта:
- `/api/v1/jwt/create/` (POST): передаём логин и пароль, получаем токен для авторизации.
- `/api/v1/jwt/refresh/` (POST): передаём refresh-токен, получаем access-токен для авторизации.
- `/api/v1/jwt/verify/` (POST): передаём access-токен, получаем проверку токена.
- `api/v1/posts/` (GET, POST): получаем список всех постов или создаём новый пост.
- `api/v1/posts/{post_id}/` (GET, PUT, PATCH, DELETE): получаем, редактируем или удаляем пост по `id`.
- `api/v1/groups/` (GET): получаем список всех групп.
- `api/v1/groups/{group_id}/` (GET): получаем информацию о группе по `id`.
- `api/v1/users/` (GET): получаем данные о текущем зарегистрированном пользователе.
- `api/v1/posts/{post_id}/comments/` (GET, POST): получаем список всех комментариев поста с `id=post_id` или создаём новый, указав `id` поста, который хотим прокомментировать.
- `api/v1/posts/{post_id}/comments/{comment_id}/` (GET, PUT, PATCH, DELETE): получаем, редактируем или удаляем комментарий по `id` у поста с `id=post_id`.
- `api/v1/follow/` (GET): получаем данные обовсех авторах, на которых подписан текущий зарегистрированный пользователь.
- `api/v1/follow/` (POST): подписываемся на конкретного автора текущим зарегистрированным пользователем.
- `api/v1/users/` (GET): получаем данные о текущем зарегистрированном пользователе.

###Важно
Все безопасные методы ('GET', 'HEAD', 'OPTIONS') доступны любым пользователям, в том числе и
неавторизованным. за исключением эндпоинта `api/v1/follow/`, он доступен лишь авторизованным
пользователям.
### Стек:
```
Python, Django, DRF, DRF-simplejwt
```
Клонируем репозиторий и переходим в него:
```bash
git clone git@github.com:SpaiK89/api_yatube.git
cd api_yatube
```

Создаем и активируем виртуальное окружение:
для MacOS/Linux
```bash
python3 -m venv venv
source venv/bin/activate
```
для Windows
```bash
python -m venv venv
source venv/Scripts/activate
```
```bash
python -m pip install --upgrade pip
```

Ставим зависимости из requirements.txt:
```bash
pip install -r requirements.txt
```

Переходим в папку yatube_api:
```bash
cd yatube_api
```

Выполняем миграции:
```bash
python manage.py makemigrations
```
```bash
python manage.py migrate
```

Создаем суперпользователя:
```bash
python manage.py createsuperuser
```

Запускаем проект:
```bash
python manage.py runserver
```

### Примеры работы
По умолчанию для неавторизованных пользователей проект доступен только для чтения.
```
api/v1/posts/ - получение списка всех постов
api/v1/posts/{id}/ - получение поста
api/v1/groups/ - получение списка всех групп
api/v1/groups/{id}/ - получение группы
api/v1/{post_id}/comments/ - получение списка всех комментариев под определенным постом
api/v1/{post_id}/comments/{id}/ - получение комментария
```
За исключением эндпоинта **follow**, он доступен только для авторизованных пользователей.
```
api/v1/follow/ - получение подписок текущего пользователя
```
- Авторизованные пользователи могут создавать посты, комментировать их и подписываться на других пользователей.
- Пользователи могут изменять(удалять) контент, автором которого они являются.
Так же в проекте присутсвует пагинация(LimitOffsetPagination) для эндпоинта **posts**
и поиск для эндпоинта **follow**, примеры ниже.
```
api/v1/posts/?limit=10&offset=0 - Пагинация на 10 постов, начиная с первого
api/v1/follow/?search=a - Поиск по вхождению символов в username автора, на которого подписан текущий пользователь
```

### Добавление групп(сообществ) и регистрация новых пользователей доступны через админ панель Django:
```
admin/ - для авторизации необходимо создать администратора командой '''python manage.py createsuperuser'''
```
Доступ для зарегистрированных пользователей осуществляется через jwt-токен,
который можно получить, выполнив POST запрос по адресу:
```
api/v1/jwt/create/
```
Передав в 'body' данные пользователя:
```
{
"username": "your_nickname",
"password": "your_password"
}
```
Получив токен, его нужно добавить в headers, после этого вам буду доступны все функции проекта:
```
Authorization: Bearer {your_token}
```
Проверить и обновить токен можно по следующим эндпоинтам:
```
api/v1/jwt/refresh/ - Обновление токена
api/v1/jwt/verify/ - Проверка токена
```

### Разработчик проекта
- [Богомолов Игорь](https://github.com/SpaiK89)